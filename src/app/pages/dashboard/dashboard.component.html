<!-- Dashboard Header -->
<section class="dashboard-header py-4">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8">
        <h1 class="welcome-title">Hola, Joel 👋</h1>
        <p class="welcome-subtitle">Estos son tus cursos activos y progreso</p>
      </div>
      <div class="col-md-4 text-end">
        <div class="user-avatar">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&q=80" 
               alt="Joel" class="avatar-img">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Dashboard Content -->
<div class="container mt-4">
  <!-- Progreso de Cursos -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="section-title">Mis Cursos Activos</h2>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="course-card">
        <div class="course-header">
          <div class="course-icon">
            <i class="fab fa-angular fa-2x text-primary"></i>
          </div>
          <div class="course-info">
            <h4>Angular desde Cero</h4>
            <p class="course-level">Intermedio</p>
          </div>
        </div>
        <div class="course-progress">
          <div class="progress">
            <div class="progress-bar" style="width: 65%"></div>
          </div>
          <span class="progress-text">65% completado</span>
        </div>
        <div class="course-actions">
          <button class="btn btn-primary btn-sm">Continuar</button>
          <button class="btn btn-outline-secondary btn-sm">Ver Detalles</button>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="course-card">
        <div class="course-header">
          <div class="course-icon">
            <i class="fab fa-js-square fa-2x text-warning"></i>
          </div>
          <div class="course-info">
            <h4>JavaScript Avanzado</h4>
            <p class="course-level">Avanzado</p>
          </div>
        </div>
        <div class="course-progress">
          <div class="progress">
            <div class="progress-bar" style="width: 30%"></div>
          </div>
          <span class="progress-text">30% completado</span>
        </div>
        <div class="course-actions">
          <button class="btn btn-primary btn-sm">Continuar</button>
          <button class="btn btn-outline-secondary btn-sm">Ver Detalles</button>
        </div>
      </div>
    </div>
    
    <div class="col-lg-4 col-md-6 mb-4">
      <div class="course-card">
        <div class="course-header">
          <div class="course-icon">
            <i class="fab fa-node-js fa-2x text-success"></i>
          </div>
          <div class="course-info">
            <h4>Node.js Backend</h4>
            <p class="course-level">Principiante</p>
          </div>
        </div>
        <div class="course-progress">
          <div class="progress">
            <div class="progress-bar" style="width: 0%"></div>
          </div>
          <span class="progress-text">0% completado</span>
        </div>
        <div class="course-actions">
          <button class="btn btn-primary btn-sm">Comenzar</button>
          <button class="btn btn-outline-secondary btn-sm">Ver Detalles</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Acceso Rápido -->
  <div class="row mb-5">
    <div class="col-12">
      <h2 class="section-title">Acceso Rápido</h2>
    </div>
    
    <div class="col-md-6 mb-3">
      <div class="quick-access-card">
        <div class="quick-access-icon">
          <i class="fas fa-play-circle fa-2x text-primary"></i>
        </div>
        <div class="quick-access-content">
          <h5>Continuar Último Curso</h5>
          <p>Retomá donde lo dejaste en Angular desde Cero</p>
          <button class="btn btn-primary">Continuar</button>
        </div>
      </div>
    </div>
    
    <div class="col-md-6 mb-3">
      <div class="quick-access-card">
        <div class="quick-access-icon">
          <i class="fas fa-star fa-2x text-warning"></i>
        </div>
        <div class="quick-access-content">
          <h5>Nuevos Cursos Recomendados</h5>
          <p>Descubrí cursos personalizados para vos</p>
          <button class="btn btn-outline-primary">Explorar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Gestión de Usuarios (Admin) -->
  <div class="row mb-5">
    <div class="col-12">
      <div class="admin-section">
        <div class="admin-header">
          <h2 class="section-title">
            <i class="fas fa-users-cog"></i> Gestión de Usuarios
          </h2>
          <p class="section-subtitle">Crea, edita y elimina usuarios del sistema</p>
        </div>

        <!-- Formulario de Usuario -->
        <div class="card shadow-sm mb-4">
          <div class="card-header bg-primary text-white">
            <h5>{{ editing ? 'Editar Usuario' : 'Nuevo Usuario' }}</h5>
          </div>
          <div class="card-body">
            <form (ngSubmit)="saveUsuario()" #usuarioForm="ngForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="nombre" class="form-label">Nombre</label>
                  <input
                    type="text"
                    id="nombre"
                    class="form-control"
                    [(ngModel)]="usuario.nombre"
                    name="nombre"
                    placeholder="Ingresa el nombre"
                    required
                  >
                </div>
                <div class="col-md-6 mb-3">
                  <label for="email" class="form-label">Email</label>
                  <input
                    type="email"
                    id="email"
                    class="form-control"
                    [(ngModel)]="usuario.email"
                    name="email"
                    placeholder="usuario@ejemplo.com"
                    required
                  >
                </div>
              </div>
              <div class="d-flex gap-2">
                <button
                  type="submit"
                  class="btn btn-success px-4"
                  [disabled]="usuarioForm.invalid"
                >
                  <i class="fas fa-save"></i>
                  {{ editing ? 'Actualizar' : 'Guardar' }}
                </button>
                <button
                  type="button"
                  class="btn btn-secondary px-4"
                  (click)="resetForm()"
                  *ngIf="editing"
                >
                  <i class="fas fa-times"></i> Cancelar
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Tabla de Usuarios -->
        <div class="card shadow-sm">
          <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
            <h5 class="mb-0">
              <i class="fas fa-list"></i> Lista de Usuarios
            </h5>
            <span class="badge bg-info text-dark">{{ usuarios.length }} registros</span>
          </div>
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Email</th>
                  <th class="text-center">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let u of usuarios">
                  <td>{{ u.id }}</td>
                  <td>{{ u.nombre }}</td>
                  <td>{{ u.email }}</td>
                  <td class="text-center">
                    <button
                      class="btn btn-sm btn-outline-warning me-2"
                      (click)="editUsuario(u)"
                    >
                      <i class="fas fa-edit"></i> Editar
                    </button>
                    <button
                      class="btn btn-sm btn-outline-danger"
                      (click)="openConfirmDelete(confirmModal, u)"
                    >
                      <i class="fas fa-trash"></i> Eliminar
                    </button>
                  </td>
                </tr>
              </tbody>
              <tfoot *ngIf="usuarios.length === 0">
                <tr>
                  <td colspan="4" class="text-center text-muted py-4">
                    <i class="fas fa-user-slash"></i> No hay usuarios registrados
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notificaciones -->
  <div class="row">
    <div class="col-12">
      <div class="notifications-section">
        <h2 class="section-title">
          <i class="fas fa-bell"></i> Notificaciones
        </h2>
        
        <div class="notification-card">
          <div class="notification-item">
            <div class="notification-icon success">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="notification-content">
              <h6>¡Felicitaciones!</h6>
              <p>Completaste el módulo "Componentes en Angular"</p>
              <small class="text-muted">Hace 2 horas</small>
            </div>
          </div>
          
          <div class="notification-item">
            <div class="notification-icon info">
              <i class="fas fa-info-circle"></i>
            </div>
            <div class="notification-content">
              <h6>Nuevo curso disponible</h6>
              <p>Se agregó "React Hooks Avanzados" a tu lista de cursos</p>
              <small class="text-muted">Hace 1 día</small>
            </div>
          </div>
          
          <div class="notification-item">
            <div class="notification-icon warning">
              <i class="fas fa-trophy"></i>
            </div>
            <div class="notification-content">
              <h6>Logro desbloqueado</h6>
              <p>Obtuviste la insignia "Desarrollador Frontend"</p>
              <small class="text-muted">Hace 3 días</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Confirmación -->
<ng-template #confirmModal let-modal>
  <div class="modal-header bg-danger text-white">
    <h5 class="modal-title">
      <i class="fas fa-exclamation-triangle"></i> Confirmar Eliminación
    </h5>
  </div>
  <div class="modal-body">
    <p>¿Estás seguro de que deseas eliminar al usuario?</p>
    <ul class="list-group">
      <li class="list-group-item"><strong>Nombre:</strong> {{ usuario.nombre }}</li>
      <li class="list-group-item"><strong>Email:</strong> {{ usuario.email }}</li>
    </ul>
    <p class="text-danger mt-3"><small>Esta acción no se puede deshacer.</small></p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancelar</button>
    <button type="button" class="btn btn-danger" (click)="deleteUsuario()">
      <i class="fas fa-trash"></i> Sí, Eliminar
    </button>
  </div>
</ng-template>
